<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DAQ GUI Prototype</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div>
      <h1>로켓 지상시험 DAQ/GUI</h1>
      <p>실시간 상태 표시, 로깅, 캘리브레이션을 포함한 GUI 시안</p>
    </div>
    <div class="status-strip">
      <span class="status-pill connected">Connected</span>
      <span class="status-pill">Frames: 12000</span>
      <span class="status-pill">Drops: 2 (0.017%)</span>
      <span class="status-pill">CRC Errors: 0</span>
    </div>
  </header>

  <main class="layout">
    <section class="panel schematic">
      <div class="panel-header">
        <h2>추진제 공급/배관도</h2>
        <div class="legend">
          <span class="legend-item on">ON</span>
          <span class="legend-item off">OFF</span>
        </div>
      </div>
      <div class="schematic-canvas">
        <svg viewBox="0 0 900 700" aria-label="Propellant schematic">
          <rect x="20" y="20" width="860" height="660" rx="18" class="frame" />

          <text x="90" y="90" class="label">GC1</text>
          <text x="230" y="90" class="label">GC2</text>
          <text x="650" y="90" class="label">GC3</text>
          <text x="790" y="90" class="label">GC4</text>

          <rect x="70" y="110" width="100" height="180" rx="40" class="tank tank-left" />
          <rect x="210" y="110" width="100" height="180" rx="40" class="tank tank-left" />
          <rect x="620" y="110" width="100" height="180" rx="40" class="tank tank-right" />
          <rect x="760" y="110" width="100" height="180" rx="40" class="tank tank-right" />

          <line x1="120" y1="290" x2="120" y2="420" class="pipe" />
          <line x1="260" y1="290" x2="260" y2="420" class="pipe" />
          <line x1="670" y1="290" x2="670" y2="420" class="pipe" />
          <line x1="810" y1="290" x2="810" y2="420" class="pipe" />

          <line x1="120" y1="420" x2="420" y2="420" class="pipe" />
          <line x1="480" y1="420" x2="810" y2="420" class="pipe" />
          <line x1="450" y1="420" x2="450" y2="610" class="pipe" />

          <circle cx="450" cy="610" r="28" class="engine" />
          <text x="430" y="655" class="label small">ENGINE</text>

          <rect x="360" y="450" width="80" height="26" rx="6" class="sensor" />
          <text x="368" y="468" class="sensor-text">DP1 0.00 kPa</text>

          <rect x="470" y="450" width="80" height="26" rx="6" class="sensor" />
          <text x="478" y="468" class="sensor-text">DP2 0.00 kPa</text>

          <rect x="90" y="60" width="70" height="26" rx="6" class="sensor" />
          <text x="98" y="78" class="sensor-text">P1 0.00</text>
          <rect x="730" y="60" width="70" height="26" rx="6" class="sensor" />
          <text x="738" y="78" class="sensor-text">P2 0.00</text>

          <rect x="110" y="450" width="70" height="26" rx="6" class="sensor" />
          <text x="118" y="468" class="sensor-text">T1 0.0℃</text>
          <rect x="690" y="450" width="70" height="26" rx="6" class="sensor" />
          <text x="698" y="468" class="sensor-text">T2 0.0℃</text>

          <rect x="390" y="610" width="70" height="26" rx="6" class="sensor" />
          <text x="398" y="628" class="sensor-text">P5 0.00</text>
          <rect x="470" y="610" width="70" height="26" rx="6" class="sensor" />
          <text x="478" y="628" class="sensor-text">P6 0.00</text>
        </svg>

        <div class="valve-panel">
          <button class="valve-btn off" data-state="off">GCFV <span>OFF</span></button>
          <button class="valve-btn on" data-state="on">GCOV <span>ON</span></button>
          <button class="valve-btn off" data-state="off">MFV <span>OFF</span></button>
          <button class="valve-btn on" data-state="on">MOV <span>ON</span></button>
        </div>
      </div>
    </section>

    <section class="panel report">
      <div class="panel-header">
        <h2>설계 보고서 요약</h2>
      </div>
      <div class="report-grid">
        <article>
          <h3>설계 목표 및 범위</h3>
          <p>STM32 기반 센서 데이터를 실시간으로 수집/표시하고 안전하게 저장하며, 신뢰성·실시간성·확장성을 확보합니다.</p>
        </article>
        <article>
          <h3>계층 구조</h3>
          <ul>
            <li>하드웨어/통신/처리/파이프라인/프레젠테이션 계층으로 분리</li>
            <li>Producer-Consumer 구조로 데이터 흐름 분산</li>
          </ul>
        </article>
        <article>
          <h3>로깅 및 세션 관리</h3>
          <ul>
            <li>세션 단위 파일 분리, 메타데이터 포함</li>
            <li>CSV/HDF5/MDF 포맷 지원 및 export 전략</li>
          </ul>
        </article>
        <article>
          <h3>캘리브레이션</h3>
          <ul>
            <li>장기/단기 보정 분리, 버전 관리</li>
            <li>Zero/Span 보정 UI 제공</li>
          </ul>
        </article>
        <article>
          <h3>신뢰성 기능</h3>
          <ul>
            <li>자동 재연결, 드롭/CRC 감지</li>
            <li>상태 카드에 지표 표시</li>
          </ul>
        </article>
        <article>
          <h3>확장 고려</h3>
          <ul>
            <li>제어 계층 분리 및 외부 시스템 연계</li>
            <li>자동 분석/리포트 생성 준비</li>
          </ul>
        </article>
      </div>
    </section>

    <section class="panel config">
      <div class="panel-header">
        <h2>설정 & 캘리브레이션</h2>
      </div>
      <div class="config-grid">
        <div class="config-card">
          <h4>채널 레지스트리</h4>
          <div class="kv">
            <span>ChamberPressure</span>
            <span>psi · scale 0.1 · offset 0.0</span>
          </div>
          <div class="kv">
            <span>FuelTemp</span>
            <span>℃ · scale 0.01 · offset -100</span>
          </div>
        </div>
        <div class="config-card">
          <h4>세션 정보</h4>
          <div class="kv">
            <span>Session</span>
            <span>20260205_test1.mdf</span>
          </div>
          <div class="kv">
            <span>Operator</span>
            <span>J. Doe</span>
          </div>
          <div class="kv">
            <span>Format</span>
            <span>HDF5 + CSV export</span>
          </div>
        </div>
        <div class="config-card">
          <h4>캘리브레이션</h4>
          <div class="kv">
            <span>Long-term</span>
            <span>scale 0.0987 / offset 0.0</span>
          </div>
          <div class="kv">
            <span>Short-term</span>
            <span>zero offset +0.5 psi</span>
          </div>
          <button class="secondary">Zero Calibrate Now</button>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
